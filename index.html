<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caterix - Professional Catering Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&family=Dancing+Script:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <style>
        /* [ALL YOUR EXISTING CSS STAYS EXACTLY THE SAME - NO CHANGES] */
        :root {
            --primary-green: #2e7d32;
            --dark-green: #1b5e20;
            --light-green: #4caf50;
            --accent-gold: #ffb300;
            --dark-gold: #ff8f00;
            --light-gray: #f5f5f5;
            --medium-gray: #e0e0e0;
            --dark-gray: #424242;
            --text-dark: #212121;
            --white: #ffffff;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            --radius: 16px;
            --pill-radius: 50px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--white);
        }
        
        /* [ALL YOUR EXISTING CSS REMAINS UNCHANGED] */
        /* ... rest of your CSS ... */
        
        /* NEW STYLES FOR AUTH MODAL */
        .auth-modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }
        
        .auth-modal-content {
            background: var(--white);
            border-radius: var(--radius);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .close-auth-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            color: var(--dark-gray);
            cursor: pointer;
            z-index: 2001;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        .close-auth-modal:hover {
            background-color: var(--light-gray);
            color: var(--primary-green);
        }
        
        .auth-iframe {
            width: 100%;
            height: 500px;
            border: none;
            border-radius: var(--radius);
        }
        
        /* Loading spinner for auth modal */
        .auth-loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 500px;
            flex-direction: column;
            gap: 20px;
        }
        
        .auth-loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid var(--light-gray);
            border-top: 5px solid var(--primary-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- AUTH MODAL FOR LOADING EXTERNAL PAGES -->
    <div class="auth-modal-overlay" id="authModal">
        <div class="auth-modal-content">
            <button class="close-auth-modal" id="closeAuthModal">
                <i class="fas fa-times"></i>
            </button>
            <div id="authLoading" class="auth-loading">
                <div class="auth-loading-spinner"></div>
                <p>Loading...</p>
            </div>
            <iframe id="authIframe" class="auth-iframe" src="" frameborder="0"></iframe>
        </div>
    </div>

    <!-- Home Page -->
    <div id="homePage">
        <!-- Header with Logo -->
        <header>
            <div class="container header-container">
                <a href="#" class="logo-container">
                    <div class="logo">
                        <div class="logo-icons">
                            <i class="fas fa-utensils"></i>
                            <i class="fas fa-cheese"></i>
                            <i class="fas fa-hat-chef"></i>
                        </div>
                        <div class="logo-text">Caterix</div>
                        <div class="logo-underline"></div>
                    </div>
                </a>
                
                <div class="auth-buttons">
                    <!-- UPDATED: Added data-action attribute to identify which page to load -->
                    <a href="#" class="signin-btn" data-action="signin">Sign In</a>
                    <a href="#" class="signup-btn" data-action="signup">Sign Up</a>
                </div>
                
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
        </header>

        <!-- [ALL YOUR EXISTING HTML CONTENT STAYS EXACTLY THE SAME] -->
        <!-- Hero Search Section -->
        <section class="hero">
            <div class="container">
                <h1 class="hero-title">Find Perfect Catering for Any Occasion</h1>
                <p class="hero-subtitle">From intimate gatherings to grand celebrations, discover the finest catering services tailored just for you</p>
                
                <div class="search-container">
                    <form class="search-form" id="searchForm">
                        <div class="form-group">
                            <label class="form-label" for="address">Delivery Address</label>
                            <div class="input-wrapper">
                                <i class="fas fa-map-marker-alt input-icon"></i>
                                <input type="text" id="address" class="address-input" placeholder="Enter delivery address">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="occasion">Catering Occasion</label>
                            <select id="occasion" class="dropdown">
                                <option value="" disabled selected>Select an occasion</option>
                                <option value="personal">Personal & Social Events</option>
                                <option value="corporate">Corporate & Business Events</option>
                                <option value="institutional">Institutional & Organizational Events</option>
                                <option value="cultural">Cultural & Ceremonial Events</option>
                                <option value="government">Government & Official Events</option>
                                <option value="entertainment">Entertainment & Leisure Events</option>
                                <option value="special">Special Interest & Niche Events</option>
                                <option value="daily">Daily & Routine Services</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="date">Catering Date & Time</label>
                            <input type="text" id="date" class="date-input" placeholder="Select date and time">
                        </div>
                        
                        <button type="submit" class="search-btn">
                            <i class="fas fa-search"></i> Search Caterers
                        </button>
                    </form>
                </div>
            </div>
        </section>

        <!-- Business Cards Section -->
        <section class="container">
            <h2 class="section-title">Partner With Caterix</h2>
            <div class="business-cards">
                <div class="business-card">
                    <div class="business-image" style="background-image: url('https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                    <div class="business-content">
                        <h3 class="business-title">Add Your Business</h3>
                        <ul class="business-list">
                            <li>Business signup form</li>
                            <li>Upload business info: name, category, address</li>
                            <li>Upload documents (license/insurance)</li>
                            <li>Submit for approval</li>
                            <li>Business dashboard access once approved</li>
                        </ul>
                        <!-- UPDATED: Added data-action to load signup with business type -->
                        <a href="#" class="business-btn" data-action="signup" data-type="business">Get Started</a>
                    </div>
                </div>
                
                <div class="business-card">
                    <div class="business-image" style="background-image: url('https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                    <div class="business-content">
                        <h3 class="business-title">Add Your Restaurant</h3>
                        <ul class="business-list">
                            <li>Restaurant registration form</li>
                            <li>Menu upload (manual + CSV)</li>
                            <li>Set catering packages and pricing</li>
                            <li>Set availability calendar</li>
                            <li>Delivery radius, fees, minimum order</li>
                        </ul>
                        <!-- UPDATED: Added data-action to load signup with restaurant type -->
                        <a href="#" class="business-btn" data-action="signup" data-type="restaurant">Register Restaurant</a>
                    </div>
                </div>
                
                <div class="business-card">
                    <div class="business-image" style="background-image: url('https://images.unsplash.com/photo-1552664730-d307ca884978?ixlib=rb-1.2.1&auto=format&fit=crop&w-1350&q=80');"></div>
                    <div class="business-content">
                        <h3 class="business-title">Become a Partner</h3>
                        <ul class="business-list">
                            <li>Partner inquiry form</li>
                            <li>Choose partner type</li>
                            <li>Delivery, Corporate, Venue, Supplier, Affiliate</li>
                            <li>Submit + track status</li>
                        </ul>
                        <!-- UPDATED: Added data-action to load signup with partner type -->
                        <a href="#" class="business-btn" data-action="signup" data-type="partner">Partner With Us</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Features Section -->
        <section class="container features-section">
            <h2 class="section-title">Simplifying To-Dos and Gifting</h2>
            <div class="features-grid">
                <div class="feature-tile" id="flowersTile">
                    <div class="flower-image" style="background-image: url('https://images.unsplash.com/photo-1560717783-2d9478c55544?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');">
                        <div class="flower-colors">
                            <div class="flower-color red-rose">Red</div>
                            <div class="flower-color pink-rose">Pink</div>
                            <div class="flower-color yellow-rose">Yellow</div>
                            <div class="flower-color white-rose">White</div>
                        </div>
                    </div>
                    <div class="feature-label">Send Flowers</div>
                    <div class="gift-types">
                        <span class="gift-type">Roses</span>
                        <span class="gift-type">Tulips</span>
                        <span class="gift-type">Lilies</span>
                        <span class="gift-type">Orchids</span>
                    </div>
                </div>
                
                <div class="feature-tile" id="giftsTile">
                    <div class="feature-image" style="background-image: url('https://images.unsplash.com/photo-1544787219-7f47ccb76574?ixlib=rb-1.2.1&auto=format&fit=crop&w-1350&q=80');"></div>
                    <div class="feature-label">Send Gifts</div>
                    <div class="gift-types">
                        <span class="gift-type">Gift Cards</span>
                        <span class="gift-type">Chocolate</span>
                        <span class="gift-type">Gift Baskets</span>
                        <span class="gift-type">Cards</span>
                    </div>
                </div>
                
                <div class="feature-tile" id="alcoholTile">
                    <div class="feature-image" style="background-image: url('https://images.unsplash.com/photo-1514362545857-3bc16c4c7d1b?ixlib=rb-1.2.1&auto=format&fit=crop&w-1350&q=80');"></div>
                    <div class="feature-label">Shop Alcohol</div>
                    <div class="gift-types">
                        <span class="gift-type">Wine</span>
                        <span class="gift-type">Beer</span>
                        <span class="gift-type">Spirits</span>
                    </div>
                </div>
                
                <div class="feature-tile" id="suppliesTile">
                    <div class="feature-image" style="background-image: url('https://images.unsplash.com/photo-1530103862676-de8c9debad1d?ixlib=rb-1.2.1&auto=format&fit=crop&w-1350&q=80');"></div>
                    <div class="feature-label">Get Supplies</div>
                    <div class="gift-types">
                        <span class="gift-type">Plates</span>
                        <span class="gift-type">Cups</span>
                        <span class="gift-type">Decor</span>
                        <span class="gift-type">Napkins</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="footer-container">
                    <div class="footer-column">
                        <h3>Learn More About Us</h3>
                        <ul class="footer-links">
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Careers</a></li>
                            <li><a href="#">Investors</a></li>
                            <li><a href="#">Company Blog</a></li>
                            <li><a href="#">Gift Cards</a></li>
                            <li><a href="#">Promotions</a></li>
                        </ul>
                        
                        <div class="social-links">
                            <a href="#"><i class="fab fa-linkedin-in"></i></a>
                            <a href="#"><i class="fab fa-facebook-f"></i></a>
                            <a href="#"><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Download Our App</h3>
                        <div class="app-download">
                            <a href="#" class="app-btn">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/7/78/Google_Play_Store_badge_EN.svg" alt="Google Play">
                            </a>
                            <a href="#" class="app-btn">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/3/3c/Download_on_the_App_Store_Badge.svg" alt="App Store">
                            </a>
                        </div>
                        
                        <div class="contact-info">
                            <p><i class="fas fa-map-marker-alt"></i> 89 New Lebbon Rd, Sandy Hook, CT 06482</p>
                            <p><i class="fas fa-envelope"></i> info@caterix.com</p>
                            <p><i class="fas fa-phone"></i> 860-460-7078</p>
                        </div>
                    </div>
                    
                    <div class="footer-column">
                        <h3>Quick Links</h3>
                        <ul class="footer-links">
                            <li><a href="#" id="checkoutLink">Checkout</a></li>
                            <li><a href="#">How It Works</a></li>
                            <li><a href="#">For Businesses</a></li>
                            <li><a href="#">Become a Partner</a></li>
                            <li><a href="#">Help Center</a></li>
                            <!-- UPDATED: Added data-action for Forgot Password -->
                            <li><a href="#" data-action="forgot-password">Forgot Password</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Terms of Service</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="copyright">
                    <p>&copy; 2023 Caterix. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- [ALL YOUR EXISTING PAGES STAY EXACTLY THE SAME] -->
    <!-- Browse Cuisines Page -->
    <div id="browsePage">
        <!-- ... existing browse page code ... -->
    </div>
    
    <!-- Checkout Page -->
    <div id="checkoutPage">
        <!-- ... existing checkout page code ... -->
    </div>
    
    <!-- Order Confirmation Page -->
    <div id="confirmationPage" style="display: none;">
        <!-- ... existing confirmation page code ... -->
    </div>

    <!-- JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
        // [ALL YOUR EXISTING JAVASCRIPT STAYS EXACTLY THE SAME]
        // Page navigation
        const homePage = document.getElementById('homePage');
        const browsePage = document.getElementById('browsePage');
        const checkoutPage = document.getElementById('checkoutPage');
        const confirmationPage = document.getElementById('confirmationPage');
        
        // Show home page by default
        homePage.style.display = 'block';
        
        // Date picker initialization
        flatpickr("#date", {
            enableTime: true,
            dateFormat: "F j, Y at h:i K",
            minDate: "today",
            time_24hr: false,
            placeholder: "Select date and time"
        });
        
        // ... rest of your existing JavaScript ...
        
        // ============================================
        // NEW CODE FOR AUTHENTICATION PAGE LOADING
        // ============================================
        
        // Auth modal elements
        const authModal = document.getElementById('authModal');
        const authIframe = document.getElementById('authIframe');
        const authLoading = document.getElementById('authLoading');
        const closeAuthModal = document.getElementById('closeAuthModal');
        
        // Function to open auth modal with specific page
        function openAuthModal(page, params = '') {
            const baseURL = window.location.href.split('/').slice(0, -1).join('/');
            let pageURL = '';
            
            switch(page) {
                case 'signin':
                    pageURL = 'signin.html';
                    break;
                case 'signup':
                    pageURL = 'signup.html';
                    break;
                case 'forgot-password':
                    pageURL = 'forgot-password.html';
                    break;
                default:
                    pageURL = 'signin.html';
            }
            
            // Add parameters if provided
            if (params) {
                pageURL += params;
            }
            
            // Show loading spinner
            authLoading.style.display = 'flex';
            authIframe.style.display = 'none';
            
            // Set iframe source
            authIframe.src = pageURL;
            
            // Show modal
            authModal.style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
            
            // When iframe loads, hide loading spinner
            authIframe.onload = function() {
                setTimeout(() => {
                    authLoading.style.display = 'none';
                    authIframe.style.display = 'block';
                }, 500);
            };
        }
        
        // Function to close auth modal
        function closeAuthModalFunc() {
            authModal.style.display = 'none';
            authIframe.src = ''; // Clear iframe source
            document.body.style.overflow = 'auto'; // Restore scrolling
        }
        
        // Close modal when clicking close button
        closeAuthModal.addEventListener('click', closeAuthModalFunc);
        
        // Close modal when clicking outside content
        authModal.addEventListener('click', function(e) {
            if (e.target === authModal) {
                closeAuthModalFunc();
            }
        });
        
        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && authModal.style.display === 'flex') {
                closeAuthModalFunc();
            }
        });
        
        // ============================================
        // UPDATED EVENT LISTENERS FOR AUTH BUTTONS
        // ============================================
        
        // Function to handle auth button clicks
        function handleAuthButtonClick(e) {
            e.preventDefault();
            const action = this.getAttribute('data-action');
            const type = this.getAttribute('data-type');
            
            let params = '';
            if (type) {
                params = `?type=${type}`;
            }
            
            openAuthModal(action, params);
        }
        
        // Attach event listeners to all Sign In buttons
        document.querySelectorAll('.signin-btn[data-action="signin"]').forEach(btn => {
            // Remove existing event listeners first
            const newBtn = btn.cloneNode(true);
            btn.parentNode.replaceChild(newBtn, btn);
            
            // Add new event listener
            newBtn.addEventListener('click', handleAuthButtonClick);
        });
        
        // Attach event listeners to all Sign Up buttons
        document.querySelectorAll('.signup-btn[data-action="signup"]').forEach(btn => {
            // Remove existing event listeners first
            const newBtn = btn.cloneNode(true);
            btn.parentNode.replaceChild(newBtn, btn);
            
            // Add new event listener
            newBtn.addEventListener('click', handleAuthButtonClick);
        });
        
        // Attach event listeners to business buttons with auth actions
        document.querySelectorAll('.business-btn[data-action="signup"]').forEach(btn => {
            btn.addEventListener('click', handleAuthButtonClick);
        });
        
        // Attach event listener to Forgot Password link
        document.querySelectorAll('a[data-action="forgot-password"]').forEach(link => {
            link.addEventListener('click', handleAuthButtonClick);
        });
        
        // ============================================
        // UPDATED: Function to receive messages from iframe
        // ============================================
        
        // Listen for messages from the iframe (for closing modal on success)
        window.addEventListener('message', function(event) {
            // Check if the message is from our auth pages
            if (event.data && event.data.action === 'closeAuthModal') {
                closeAuthModalFunc();
                
                // If there's a success message, show it
                if (event.data.message) {
                    alert(event.data.message);
                }
                
                // If user signed in/signed up, you could update UI here
                if (event.data.user) {
                    console.log('User authenticated:', event.data.user);
                    // Update header to show user is logged in
                    // Example: show user name instead of auth buttons
                }
            }
        });
        
        // ============================================
        // KEEP ALL YOUR EXISTING EVENT LISTENERS BELOW
        // ============================================
        
        // Form submission - navigate to browse page
        document.getElementById('searchForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const address = document.getElementById('address').value;
            const occasion = document.getElementById('occasion').value;
            const date = document.getElementById('date').value;
            
            if (!address || !occasion || !date) {
                alert('Please fill in all fields before searching.');
                return;
            }
            
            // Navigate to browse page
            homePage.style.display = 'none';
            browsePage.style.display = 'block';
            checkoutPage.style.display = 'none';
            confirmationPage.style.display = 'none';
            
            // Scroll to top
            window.scrollTo(0, 0);
        });
        
        // Feature tiles click handlers
        document.getElementById('flowersTile').addEventListener('click', function() {
            alert('Opening flower marketplace with red, pink, yellow, and white roses...');
        });
        
        // ... rest of your existing event listeners ...
        
        // Tip selection
        document.querySelectorAll('.tip-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.tip-option').forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
            });
        });
        
        // ... all the rest of your existing JavaScript code ...
        
        // Mobile menu buttons
        document.getElementById('mobileMenuBtn').addEventListener('click', function() {
            alert('Mobile menu would open here with navigation links');
        });
        
        // ============================================
        // REMOVED OLD SIGN IN/SIGN UP ALERT HANDLERS
        // ============================================
        
        // The old event listeners for signin/signup buttons have been removed
        // since we're now using the new modal functionality
        
    </script>
</body>
</html>
